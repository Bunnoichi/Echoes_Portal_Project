<!DOCTYPE html>
<html lang="ja" data-bs-theme="light">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Echoes Portal Site</title>

      <!-- Bootstrap5 -->
      {% load static %}
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
      <style>
         body {
            font-size: 17px;
         }
         h2, h3, h4 {
            font-weight: 600;
            margin-top: 1rem;
         }
         th, td {
            padding: 10px 14px !important;
         }
         .status-now {
            background-color: #fff7cc !important;
            /* font-weight: bold; */
         }
         .stage-header {
            font-size: 20px;
            padding: 8px 12px;
         }
      </style>
      <!-- çµ‚ã—ãƒ¼ãˆã™ãˆã™ -->
      <script src="{% static 'website_app/javascript/base.js' %}"></script>
         </head>
   <body>

      <!-- âœ… ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
      <nav class="navbar navbar-expand-lg border-bottom mb-4">
      <div class="container-fluid">
         <a class="navbar-brand" href="{% url 'website_app:index' %}">â­ï¸ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆğŸ„</a>
         <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
         </button>

         <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">

            {% if user.is_authenticated %}
               <li class="nav-item">
                  <span class="nav-link">ç¾åœ¨ã€<strong>{{ user.username }}</strong> ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ä¸­</span>
               </li>

               <!--  JavaScriptã‚’ä½¿ã£ãŸå®‰å…¨ãªãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒªãƒ³ã‚¯ -->
               <li class="nav-item">
                  <a href="#" class="nav-link text-danger"
                     onclick="event.preventDefault(); document.getElementById('logout-form').submit();">
                  ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
                  </a>
               </li>

               <!-- POSTé€ä¿¡ç”¨ã®ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆéè¡¨ç¤ºï¼‰ -->
               <form id="logout-form" action="{% url 'accounts:logout' %}" method="post" style="display:none;">
                  {% csrf_token %}
               </form>

            {% else %}
               <li class="nav-item">
                  <a class="nav-link" href="{% url 'accounts:login' %}">ãƒ­ã‚°ã‚¤ãƒ³</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="{% url 'accounts:signup' %}">æ–°è¦ç™»éŒ²</a>
               </li>
            {% endif %}

            </ul>
            <!-- ğŸŒ™ / â˜€ï¸ ãƒˆã‚°ãƒ«ã“ã“ã« -->
            <button id="themeToggle" class="btn btn-outline-secondary btn-sm">
               ğŸŒ™ / â˜€ï¸
            </button>
         </div>
      </div>
      </nav>
      
      
      <!--  ãƒšãƒ¼ã‚¸æœ¬æ–‡ -->
      <div class="container-fluid py-3">
         
         {% if user.is_authenticated %}
            {{ user.username }} ã•ã‚“ã€ã“ã‚“ã°ã‚“ã¯ï¼
         {% else %}
            ã‚²ã‚¹ãƒˆã•ã‚“ã€ã“ã‚“ã°ã‚“ã¯ï¼
         {% endif %}

         {% block body %}
         {% endblock %}
      </div>

      
      <script>
         const html = document.documentElement;
         const toggle = document.getElementById('themeToggle');
         
         // ãƒœã‚¿ãƒ³æŠ¼ã—ãŸã‚‰ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
         toggle.addEventListener('click', () => {
            const next = html.getAttribute('data-bs-theme') === 'light' ? 'dark' : 'light';
            html.setAttribute('data-bs-theme', next);
            localStorage.setItem('theme', next);
         });
         
         // å‰å›ã®è¨­å®šã‚’å¾©å…ƒ
         const saved = localStorage.getItem('theme');
         if (saved) html.setAttribute('data-bs-theme', saved);
         </script>
         <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
   </body>
</html>