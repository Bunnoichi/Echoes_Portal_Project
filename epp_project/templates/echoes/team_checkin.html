{% extends 'base/echoes_base.html' %}
{% block body %}

<h2>出演団体登録修正</h2>
<form method="POST">
   {% csrf_token %}

   {% for field in form %}
      {% if field.name in wanted_field %}
         <div class="fieldWrapper" id="form_{{ field.name }}">
            {{ field.errors }}
            {{ field.label_tag }} {{ field }}
            <button type="button" id="button_{{ field.name }}">打刻</button>
         </div>
      {% else %}
         <div class="fieldWrapper" id="form_{{ field.name }}" hidden>
            {{ field }}
         </div>
      {% endif %}
   {% endfor %}

   <input type="submit" value="Submit">
</form>

<script>
   let btn1 = document.getElementById("button_onstage_time_acc");
   let btn2 = document.getElementById("button_checkin_postime_1");
   let btn3 = document.getElementById("button_checkin_postime_2");

   btn1.addEventListener('click', function() {
      var mydiv = document.getElementById("id_onstage_time_acc");
      mydiv.value = formatDate(new Date());
   }, false);
   btn2.addEventListener('click', function() {
      var mydiv = document.getElementById("id_checkin_postime_1");
      mydiv.value = formatDate(new Date());
   }, false);
   btn3.addEventListener('click', function() {
      var mydiv = document.getElementById("id_checkin_postime_2");
      mydiv.value = formatDate(new Date());
   }, false);

   function formatDate(dt) {
      var y = dt.getFullYear();
      var m = ('00' + (dt.getMonth()+1)).slice(-2);
      var d = ('00' + dt.getDate()).slice(-2);

      var H = ('00' + (dt.getHours())).slice(-2);
      var M = ('00' + (dt.getMinutes())).slice(-2);
      var S = ('00' + (dt.getSeconds())).slice(-2);

      return (y + '-' + m + '-' + d + ' ' + H + ':' + M + ':' + S);
   }
</script>
{% endblock %}